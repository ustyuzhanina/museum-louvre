!function(e){var t={};function i(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=t,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(r,n,function(t){return e[t]}.bind(null,n));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=3)}([function(e,t){},function(e,t){},function(e,t){},function(e,t,i){"use strict";i.r(t);document.querySelector(".page");var r=document.querySelector(".page-overlay"),n=document.querySelector(".mobile-menu"),s=document.querySelector(".hamburger-button"),o=document.querySelector(".go-up-link"),a=(document.querySelector(".progress-bar"),document.querySelector(".volume-bar"),document.querySelector(".gallery-container"),document.querySelector(".gallery-container__column_1")),c=document.querySelector(".gallery-container__column_2"),u=document.querySelector(".gallery-container__column_3"),l=document.querySelector(".section_tickets__short-form"),h=l.querySelector(".section_tickets__total-cost"),m=l.querySelector("#basicNumber"),d=l.querySelector("#seniorNumber"),v=document.querySelector(".section_tickets__button"),f=document.querySelector(".form-container"),y=document.querySelector(".close-button"),p=document.querySelector(".large-form"),b=(p.querySelector(".date"),p.querySelector(".time"),p.querySelector(".name"),p.querySelector(".email"),p.querySelector(".email"),p.querySelector("#formBasicNumber")),C=p.querySelector("#formSeniorNumber"),S=p.querySelector(".fieldset-details__price_basic"),g=p.querySelector(".fieldset-details__price_senior"),k=(p.querySelector(".overview__result_date"),p.querySelector(".overview__result_time"),p.querySelector(".overview__result_ticket-type"),p.querySelector(".overview__ticket-count_basic")),_=p.querySelector(".overview__ticket-count_senior"),w=p.querySelector(".overview__ticket-price_basic"),q=p.querySelector(".overview__ticket-price_senior"),L=p.querySelector(".overview__cost_basic"),E=p.querySelector(".overview__cost_senior"),N=p.querySelector(".overview__total-cost"),T=document.querySelector(".label-ticket-type"),x=T.querySelector(".input_ticket-type"),I=T.querySelector(".input-cover__arrow-icon"),O=T.querySelector(".input-cover__chosen-value"),P=document.querySelector(".options"),j=document.querySelector(".overview__book-button"),A=[2,9,4,6,11,1,8,3,5,13,7,10,15,12,14];function V(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var M=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.render=this.render.bind(this),this.fillColumn=this.fillColumn.bind(this)}var t,i,r;return t=e,(i=[{key:"render",value:function(){var e=function(e){for(var t=e.slice(),i=[],r=0;r<e.length;r++){var n=t[Math.floor(Math.random()*t.length)];i.push(n);var s=t.indexOf(n);t=t.slice(0,s).concat(t.slice(s+1))}return i}(A);this.fillColumn(a,e.slice(0,5)),this.fillColumn(c,e.slice(5,10)),this.fillColumn(u,e.slice(10))}},{key:"fillColumn",value:function(e,t){for(var i=0;i<t.length;i++){var r='<img src="./assets/img/gallery/'.concat(t[i],'.jpg" class="gallery-container__item" alt="painting ').concat(t[i],'">').trim(),n=document.createElement("div");n.insertAdjacentHTML("afterbegin",r);var s=n.firstChild;e.appendChild(s)}}}])&&V(t.prototype,i),r&&V(t,r),e}();function B(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var U=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.name=null,this.email=null,this.purchase={},this.checkUser=this.checkUser.bind(this),this.save=this.save.bind(this),this.storeData=this.storeData.bind(this)}var t,i,r;return t=e,(i=[{key:"checkUser",value:function(){if(localStorage.getItem("louvre")){var e=JSON.parse(localStorage.getItem("louvre"));for(var t in e)this[t]=e[t];return!0}}},{key:"save",value:function(e){localStorage.getItem("louvre")&&localStorage.removeItem("louvre"),localStorage.setItem("louvre",JSON.stringify(e))}},{key:"userData",get:function(){return{name:this.name,email:this.email,purchase:this.purchase}}},{key:"storeData",value:function(e){this.name=e.name,this.email=e.email,this.purchase=e.purchase,this.save(e)}}])&&B(t.prototype,i),r&&B(t,r),e}(),D=[{id:"tpe",ticketType:"Permanent exhibition",price:20},{id:"tte",ticketType:"Temporary exhibition",price:25},{id:"tca",ticketType:"Combined admission",price:40}];function Y(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var J=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.userClass=t,this.ticketType="",this.basicNumber=0,this.seniorNumber=0,this.cost=0,this.button=v,this.calculateCost=this.calculateCost.bind(this),this.renderCost=this.renderCost.bind(this),this.loadInputs=this.loadInputs.bind(this),this.setEventListeners=this.setEventListeners.bind(this)}var t,i,r;return t=e,(i=[{key:"loadInputs",value:function(){var e=this;m.value=this.userClass.purchase.basicNumber,d.value=this.userClass.purchase.seniorNumber,this.basicNumber=this.userClass.purchase.basicNumber,this.seniorNumber=this.userClass.purchase.seniorNumber,l.querySelectorAll("input[type=radio]").forEach((function(t){var i=t.closest(".label");i.textContent.trim()===e.userClass.purchase.ticketType&&(i.querySelector("input").checked="checked",e.ticketType=e.userClass.purchase.ticketType)})),this.calculateCost()}},{key:"calculateCost",value:function(){for(var e=0;e<D.length;e++)if(D[e].ticketType.toLowerCase().trim()===this.ticketType.toLowerCase().trim()){this.cost=this.basicNumber*D[e].price+this.seniorNumber*D[e].price*.5;break}}},{key:"renderCost",value:function(){h.textContent=String(this.cost);var e={ticketType:this.ticketType,basicNumber:this.basicNumber,seniorNumber:this.seniorNumber},t={name:this.userClass.name||"Unknown",email:this.userClass.email||"Unknown",purchase:e};this.userClass.storeData(t)}},{key:"setEventListeners",value:function(e){var t=this;"radio"===e.type&&(e.checked&&(this.ticketType=e.closest(".label").textContent.trim()),e.addEventListener("change",(function(e){t.ticketType=e.target.closest(".label").textContent.trim(),t.calculateCost(),t.renderCost()}))),"number"===e.type&&e.closest("div").querySelectorAll("button").forEach((function(e){e.addEventListener("click",(function(e){var i=e.target.closest("div").querySelector("input");i.id,t[i.id]=Number(i.value),t.calculateCost(),t.renderCost()}))}))}}])&&Y(t.prototype,i),r&&Y(t,r),e}();function H(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var R=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.userClass=t,this.ticketType="",this.basicNumber=0,this.seniorNumber=0,this.basicPrice=0,this.seniorPrice=0,this.basicCost=0,this.seniorCost=0,this.cost=0,this.container=f,this.button=j,this.closeBtn=y,this.form=p,this.open=this.open.bind(this),this.close=this.close.bind(this),this.calculateCost=this.calculateCost.bind(this),this.renderOverview=this.renderOverview.bind(this),this.loadInputs=this.loadInputs.bind(this),this.renderNumberContainer=this.renderNumberContainer.bind(this),this.setEventListeners=this.setEventListeners.bind(this)}var t,i,n;return t=e,(i=[{key:"open",value:function(){var e=this;this.button.removeAttribute("disabled"),this.loadInputs(),this.renderNumberContainer(),this.renderOverview(),this.container.classList.add("form-container_visible"),this.container.classList.remove("form-container_invisible"),r.classList.remove("page-overlay_hidden"),setTimeout((function(){e.container.style.overflowY="scroll"}),1e3)}},{key:"close",value:function(){this.container.style.overflowY="hidden",this.container.classList.remove("form-container_visible"),this.container.classList.add("form-container_invisible"),r.classList.add("page-overlay_hidden")}},{key:"loadInputs",value:function(){this.basicNumber=this.userClass.purchase.basicNumber,this.seniorNumber=this.userClass.purchase.seniorNumber,this.userClass.purchase.ticketType&&(x.value=this.userClass.purchase.ticketType,O.textContent=this.userClass.purchase.ticketType,this.ticketType=this.userClass.purchase.ticketType),this.calculateCost()}},{key:"calculateCost",value:function(){for(var e=0;e<D.length;e++)if(D[e].ticketType.toLowerCase().trim()===this.ticketType.toLowerCase().trim()){this.basicPrice=D[e].price,this.seniorPrice=.5*D[e].price,this.basicCost=this.basicNumber*this.basicPrice,this.seniorCost=this.seniorNumber*this.seniorPrice,this.cost=this.seniorCost+this.basicCost;break}}},{key:"renderNumberContainer",value:function(){b.value=this.userClass.purchase.basicNumber,C.value=this.userClass.purchase.seniorNumber,S.textContent=String(this.basicPrice),g.textContent=String(this.seniorPrice)}},{key:"renderOverview",value:function(){k.textContent=String(this.basicNumber),_.textContent=String(this.seniorNumber),w.textContent=String(this.basicPrice),q.textContent=String(this.seniorPrice),L.textContent=String(this.basicCost),E.textContent=String(this.seniorCost),N.textContent=String(this.cost);var e={ticketType:this.ticketType,basicNumber:this.basicNumber,seniorNumber:this.seniorNumber},t={name:this.userClass.name||"Unknown",email:this.userClass.email||"Unknown",purchase:e};this.userClass.storeData(t)}},{key:"setEventListeners",value:function(){x.addEventListener("click",(function(e){function t(){P.classList.toggle("options_visible")}function i(){I.classList.toggle("input-cover__arrow-icon_down"),I.classList.toggle("input-cover__arrow-icon_up")}i(),t(),P.addEventListener("click",(function e(r){var n=r.target.closest(".option").textContent;x.value=n.trim(),O.textContent=n,i(),t(),P.removeEventListener("click",e)}))})),this.button.addEventListener("click",(function(e){e.preventDefault();var t=document.createElement("span");t.classList.add("button","button__ripple-effect"),this.appendChild(t);var i=e.clientX-e.target.offsetLeft,r=e.clientY-e.target.offsetTop;t.style.left="".concat(i,"px"),t.style.top="".concat(r,"px"),setTimeout((function(){t.remove()}),1e3)}))}}])&&H(t.prototype,i),n&&H(t,n),e}(),X="This field is required",$="Type 3 to 15 characters",z="Only Russian/English letters and spaces are allowed",F="Pattern username@example.com is required",G="Max 10 digits possibly split by 2-3 digits with space or hiphen";function K(e){return function(e){if(Array.isArray(e))return e}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Q(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Q(e,t)}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Q(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=e[i];return r}function W(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Z=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.formClass=t,this.form=this.formClass.form,this.isValidate=this.isValidate.bind(this),this.checkInputValidity=this.checkInputValidity.bind(this),this.handleInputs=this.handleInputs.bind(this),this.setSubmitButtonState=this.setSubmitButtonState.bind(this),this.setEventListeners=this.setEventListeners.bind(this),this.removeEventListeners=this.removeEventListeners.bind(this),this.resetErrors=this.resetErrors.bind(this)}var t,i,r;return t=e,(i=[{key:"isValidate",value:function(e){return e.setCustomValidity(""),e.validity.valueMissing?(e.setCustomValidity(X),!1):e.validity.tooShort||e.validity.tooLong?(e.setCustomValidity($),!1):e.validity.patternMismatch&&"text"===e.type?(e.setCustomValidity(z),!1):(e.validity.typeMismatch||e.validity.patternMismatch)&&"email"===e.type?(e.setCustomValidity(F),!1):(e.validity.tooLong||e.validity.patternMismatch)&&"tel"===e.type?(e.setCustomValidity(G),!1):e.checkValidity()}},{key:"checkInputValidity",value:function(e){var t=e.parentNode.querySelector(".error-message"),i=this.isValidate(e);return i?(t.textContent="",e.classList.remove("error")):(t.textContent=e.validationMessage,e.classList.add("error")),i}},{key:"handleInputs",value:function(e){var t=this.formClass.button,i=K(this.form.querySelectorAll("input")).slice(0);this.checkInputValidity(e.target),i.every(this.isValidate)?this.setSubmitButtonState(t,!0):this.setSubmitButtonState(t,!1)}},{key:"setEventListeners",value:function(){this.form.addEventListener("input",this.handleInputs,!0)}},{key:"removeEventListeners",value:function(){this.form.removeEventListener("input",this.handleInputs,!0),this.resetErrors()}},{key:"setSubmitButtonState",value:function(e,t){t?e.removeAttribute("disabled"):e.setAttribute("disabled","disabled")}},{key:"resetErrors",value:function(){this.form.reset(),this.form.querySelectorAll(".error-message").forEach((function(e){e.textContent="",e.parentNode.querySelector("input").classList.remove("error")}))}}])&&W(t.prototype,i),r&&W(t,r),e}();i(0),i(1),i(2);!function(){console.log("\n  Общий итог: (38/150)\n  Пока что сделаны только следующие пункты. Остальные можно не проверять:\n\n  6) Калькулятор продажи билетов в секции Tiskets (10/10)\n\n  - при изменении количества билетов Basic и Senior пересчитывается общая цена за них (4/4)\n\n  - у каждого типа билетов своя цена (20 €, 25 €, 40 € для Basic и половина этой стоимости для Senior). При изменении типа билета пересчитывается общая цена за них (4/4)\n\n  - при обновлении страницы сохраняется выбранное ранее количество билетов Basic и Senior, выбранный тип билета, общая цена за них (2/2)\n\n  7)Калькулятор продажи билетов в форме продажи билетов (2/14)\n\n- когда при клике по кнопке Buy now открывается форма, она уже содержит данные, указанные на странице сайта - количество билетов, их тип, общая цена за них (2/2)\n\n8) Валидация формы (16/16)\n\n- валидация имени пользователя. Имя пользователя должно содержать от 3 до 15 символов, в качестве символов могут быть использованы буквы английского или русского алфавита в нижнем или верхнем регистре и пробелы (4/4)\n\n- валидация e-mail должна пропускать только адреса вида username@example.com, где: username - имя пользователя, должно содержать от 3 до 15 символов (буквы, цифры, знак подчёркивания, дефис), не должно содержать пробелов; @ - символ собачки; example - домен первого уровня состоит минимум из 4 латинских букв; com - домен верхнего уровня, отделяется от домена первого уровня точкой и состоит минимум из 2 латинских букв (4/4)\n\n- валидация номера телефона: номер содержит только цифры; без разделения или с разделением на две или три цифры; разделение цифр может быть через дефис или пробел; с ограничением по количеству цифр не больше 10 цифр (4/4)\n\n- при попытке ввода в input невалидного значения, его граница подсвечивается красным, выводится текстовое предупреждение в человекочитаемом формате (4/4)\n\n10) Любой собственный дополнительный функционал, улучшающий качество проекта. Реализована кнопка возврата в начало вебстраницы. Находится в правом нижнем углу окна просмотра, появляется с event scroll на document(10/10)\n\n");var e=new M,t=new U,i=new J(t),r=new R(t),a=new Z(r);function c(){n.classList.toggle("mobile-menu_open"),s.classList.toggle("hamburger-button_open")}t.checkUser(),t.checkUser()&&i.loadInputs(),i.renderCost(),l.querySelectorAll("input").forEach((function(e){i.setEventListeners(e)})),document.addEventListener("scroll",(function e(){o.classList.add("go-up-link_visible"),document.removeEventListener("scroll",e)})),e.render(),s.addEventListener("click",c),n.addEventListener("click",c),i.button.addEventListener("click",(function(e){e.preventDefault(),r.open(),a.setEventListeners()})),r.setEventListeners(),r.closeBtn.addEventListener("click",(function(e){e.preventDefault(),r.close(),a.removeEventListeners()}))}()}]);