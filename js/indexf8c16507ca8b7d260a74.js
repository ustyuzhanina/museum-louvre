!function(e){var t={};function i(r){if(t[r])return t[r].exports;var s=t[r]={i:r,l:!1,exports:{}};return e[r].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=e,i.c=t,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)i.d(r,s,function(t){return e[t]}.bind(null,s));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=2)}([function(e,t){},function(e,t){},function(e,t,i){"use strict";i.r(t);document.querySelector(".page");var r=document.querySelector(".page-overlay"),s=document.querySelector(".mobile-menu"),n=document.querySelector(".hamburger-button"),a=document.querySelector(".go-up-link"),o=(document.querySelector(".carousel__container"),document.querySelector(".carousel__image-box")),c=document.querySelector(".carousel__controls"),l=(document.querySelector(".carousel__total-qty"),document.querySelector(".carousel__button-container")),u=(document.querySelector(".carousel__arrow-container"),document.querySelector(".progress-bar"),document.querySelector(".volume-bar"),document.querySelector(".gallery-container"),document.querySelector(".gallery-container__column_1")),h=document.querySelector(".gallery-container__column_2"),m=document.querySelector(".gallery-container__column_3"),d=document.querySelector(".section_tickets__short-form"),v=d.querySelector(".section_tickets__total-cost"),f=d.querySelector("#basicNumber"),p=d.querySelector("#seniorNumber"),y=document.querySelector(".section_tickets__button"),b=document.querySelector(".form-container"),g=document.querySelector(".close-button"),_=document.querySelector(".large-form"),C=_.querySelector(".date"),S=_.querySelector(".time"),k=_.querySelector("#time-options"),L=_.querySelector(".name"),E=_.querySelector(".email"),w=_.querySelector(".phone"),q=_.querySelector("#formBasicNumber"),I=_.querySelector("#formSeniorNumber"),x=_.querySelector(".fieldset-details__price_basic"),N=_.querySelector(".fieldset-details__price_senior"),T=_.querySelector(".overview__result_date"),O=_.querySelector(".overview__result_time"),P=_.querySelector(".overview__result_ticket-type"),D=_.querySelector(".overview__ticket-count_basic"),A=_.querySelector(".overview__ticket-count_senior"),V=_.querySelector(".overview__ticket-price_basic"),j=_.querySelector(".overview__ticket-price_senior"),M=_.querySelector(".overview__cost_basic"),B=_.querySelector(".overview__cost_senior"),F=_.querySelector(".overview__total-cost"),U=document.querySelector(".label-ticket-type"),R=U.querySelector(".input_ticket-type"),Y=U.querySelector(".input-cover__arrow-icon"),J=U.querySelector(".input-cover__chosen-value"),H=document.querySelector(".options"),W=document.querySelector(".overview__book-button"),X=[2,9,4,6,11,1,8,3,5,13,7,10,15,12,14];S.min="09:00",S.max="17:30";S.step=String(1800);for(var $=S.min.split(":")[0],z=2*(+S.max.split(":")[0]-+$+1),G=9,K=[],Q=1;Q<=z;Q++){var Z=document.createElement("option"),ee=void 0;ee=G<10?"0".concat(G):"".concat(G);var te=void 0;Q%2==0?(te="".concat(30),G++):te="00",Z.value="".concat(ee,":").concat(te),Z.textContent="".concat(ee,":").concat(te),K.push(Z)}k.append.apply(k,K);function ie(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var re=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.render=this.render.bind(this),this.fillColumn=this.fillColumn.bind(this)}var t,i,r;return t=e,(i=[{key:"render",value:function(){var e=function(e){for(var t=e.slice(),i=[],r=0;r<e.length;r++){var s=t[Math.floor(Math.random()*t.length)];i.push(s);var n=t.indexOf(s);t=t.slice(0,n).concat(t.slice(n+1))}return i}(X);this.fillColumn(u,e.slice(0,5)),this.fillColumn(h,e.slice(5,10)),this.fillColumn(m,e.slice(10))}},{key:"fillColumn",value:function(e,t){for(var i=0;i<t.length;i++){var r='<img src="./assets/img/gallery/'.concat(t[i],'.jpg" class="gallery-container__item" alt="painting ').concat(t[i],'">').trim(),s=document.createElement("div");s.insertAdjacentHTML("afterbegin",r);var n=s.firstChild;e.appendChild(n)}}}])&&ie(t.prototype,i),r&&ie(t,r),e}();function se(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var ne=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.name=null,this.email=null,this.phone=null,this.purchase={},this.checkUser=this.checkUser.bind(this),this.save=this.save.bind(this),this.storeData=this.storeData.bind(this)}var t,i,r;return t=e,(i=[{key:"checkUser",value:function(){if(localStorage.getItem("louvre")){var e=JSON.parse(localStorage.getItem("louvre"));for(var t in e)this[t]=e[t];return!0}}},{key:"save",value:function(e){localStorage.getItem("louvre")&&localStorage.removeItem("louvre"),localStorage.setItem("louvre",JSON.stringify(e))}},{key:"userData",get:function(){return{name:this.name,email:this.email,phone:this.phone,purchase:this.purchase}}},{key:"storeData",value:function(e){this.name=e.name,this.email=e.email,this.phone=e.phone,this.purchase=e.purchase,this.save(e)}}])&&se(t.prototype,i),r&&se(t,r),e}(),ae=[{id:"tpe",ticketType:"Permanent exhibition",price:20},{id:"tte",ticketType:"Temporary exhibition",price:25},{id:"tca",ticketType:"Combined admission",price:40}];function oe(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var ce=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.userClass=t,this.date="",this.time="",this.ticketType="",this.basicNumber=0,this.seniorNumber=0,this.cost=0,this.button=y,this.calculateCost=this.calculateCost.bind(this),this.renderCost=this.renderCost.bind(this),this.loadInputs=this.loadInputs.bind(this),this.setEventListeners=this.setEventListeners.bind(this)}var t,i,r;return t=e,(i=[{key:"loadInputs",value:function(){var e=this;f.value=this.userClass.purchase.basicNumber,p.value=this.userClass.purchase.seniorNumber,this.basicNumber=this.userClass.purchase.basicNumber,this.seniorNumber=this.userClass.purchase.seniorNumber,this.date=this.userClass.purchase.date,this.time=this.userClass.purchase.time,d.querySelectorAll("input[type=radio]").forEach((function(t){var i=t.closest(".label");i.textContent.trim()===e.userClass.purchase.ticketType&&(i.querySelector("input").checked="checked")})),this.userClass.purchase.ticketType&&(this.ticketType=this.userClass.purchase.ticketType),this.calculateCost()}},{key:"calculateCost",value:function(){for(var e=0;e<ae.length;e++)if(ae[e].ticketType.toLowerCase().trim()===this.ticketType.toLowerCase().trim()){this.cost=this.basicNumber*ae[e].price+this.seniorNumber*ae[e].price*.5;break}}},{key:"renderCost",value:function(){v.textContent=String(this.cost);var e={date:this.date,time:this.time,ticketType:this.ticketType,basicNumber:this.basicNumber,seniorNumber:this.seniorNumber},t={name:this.userClass.name,email:this.userClass.email,phone:this.userClass.phone,purchase:e};this.userClass.storeData(t)}},{key:"setEventListeners",value:function(e){var t=this;"radio"===e.type&&(e.checked&&(this.ticketType=e.closest(".label").textContent.trim()),e.addEventListener("change",(function(e){t.ticketType=e.target.closest(".label").textContent.trim(),t.calculateCost(),t.renderCost()}))),"number"===e.type&&e.closest("div").querySelectorAll("button").forEach((function(e){e.addEventListener("click",(function(e){var i=e.target.closest("div").querySelector("input");i.id,t[i.id]=Number(i.value),t.calculateCost(),t.renderCost()}))}))}}])&&oe(t.prototype,i),r&&oe(t,r),e}();function le(e){"focus"===e.type&&(e.target.closest("label").querySelector(".input-cover").style.background="linear-gradient(to right, transparent 80%, #fff 20%)",e.target.closest("label").querySelector(".input-cover").style.color="transparent"),"blur"===e.type&&(e.target.value||(e.target.closest("label").querySelector(".input-cover").style.backgroundColor="#fff",e.target.closest("label").querySelector(".input-cover").style.color="inherit"))}function ue(e){e.classList.toggle("input-cover__arrow-icon_down"),e.classList.toggle("input-cover__arrow-icon_up")}function he(e){e.classList.toggle("options_visible")}function me(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var de=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.userClass=t,this.name="",this.email="",this.phone="",this.ticketType="",this.basicNumber=0,this.seniorNumber=0,this.basicPrice=0,this.seniorPrice=0,this.basicCost=0,this.seniorCost=0,this.cost=0,this.date="",this.time="",this.container=b,this.button=W,this.closeBtn=g,this.form=_,this.open=this.open.bind(this),this.close=this.close.bind(this),this.calculateCost=this.calculateCost.bind(this),this.renderOverview=this.renderOverview.bind(this),this.loadInputs=this.loadInputs.bind(this),this.renderNumberContainer=this.renderNumberContainer.bind(this),this.pickDataForSaving=this.pickDataForSaving.bind(this),this.setEventListeners=this.setEventListeners.bind(this)}var t,i,s;return t=e,(i=[{key:"open",value:function(){var e=this;this.button.removeAttribute("disabled"),this.loadInputs(),this.renderNumberContainer(),this.renderOverview(),this.container.classList.add("form-container_visible"),this.container.classList.remove("form-container_invisible"),r.classList.remove("page-overlay_hidden"),setTimeout((function(){e.container.style.overflowY="scroll"}),1e3)}},{key:"close",value:function(){this.container.style.overflowY="hidden",this.container.classList.remove("form-container_visible"),this.container.classList.add("form-container_invisible"),r.classList.add("page-overlay_hidden")}},{key:"loadInputs",value:function(){if(this.basicNumber=this.userClass.purchase.basicNumber,this.seniorNumber=this.userClass.purchase.seniorNumber,this.date=this.userClass.purchase.date,this.time=this.userClass.purchase.time,this.userClass.purchase.date){this.date=this.userClass.purchase.date,C.value=this.date;var e=C.closest("label").querySelector(".input-cover");e.style.background="linear-gradient(to right, transparent 80%, #fff 20%)",e.style.color="transparent"}if(this.userClass.purchase.time){this.time=this.userClass.purchase.time,S.value=this.time;var t=S.closest("label").querySelector(".input-cover");t.style.background="linear-gradient(to right, transparent 80%, #fff 20%)",t.style.color="transparent"}this.userClass.name&&(this.name=this.userClass.name,L.value=this.name),this.userClass.email&&(this.email=this.userClass.email,E.value=this.email),this.userClass.phone&&(this.phone=this.userClass.phone,w.value=this.phone),this.userClass.purchase.ticketType&&(R.value=this.userClass.purchase.ticketType,J.textContent=this.userClass.purchase.ticketType,this.ticketType=this.userClass.purchase.ticketType),this.calculateCost()}},{key:"calculateCost",value:function(){for(var e=0;e<ae.length;e++)if(ae[e].ticketType.toLowerCase().trim()===this.ticketType.toLowerCase().trim()){this.basicPrice=ae[e].price,this.seniorPrice=.5*ae[e].price,this.basicCost=this.basicNumber*this.basicPrice,this.seniorCost=this.seniorNumber*this.seniorPrice,this.cost=this.seniorCost+this.basicCost;break}}},{key:"renderNumberContainer",value:function(){q.value=this.userClass.purchase.basicNumber,I.value=this.userClass.purchase.seniorNumber,x.textContent=String(this.basicPrice),N.textContent=String(this.seniorPrice)}},{key:"pickDataForSaving",value:function(){var e={date:this.date,time:this.time,ticketType:this.ticketType,basicNumber:this.basicNumber,seniorNumber:this.seniorNumber},t={name:this.name||this.userClass.name,email:this.email||this.userClass.email,phone:this.phone||this.userClass.phone,purchase:e};this.userClass.storeData(t)}},{key:"renderOverview",value:function(){var e=new Date(Date.parse(this.date));T.textContent=this.date?e.toLocaleString("en-US",{weekday:"long",month:"long",day:"numeric"}):"-",O.textContent=this.time?"".concat(String(this.time).replace(":"," : ")):"-",P.textContent=this.ticketType||"-",D.textContent=String(this.basicNumber),A.textContent=String(this.seniorNumber),V.textContent=String(this.basicPrice),j.textContent=String(this.seniorPrice),M.textContent=String(this.basicCost),B.textContent=String(this.seniorCost),F.textContent=String(this.cost),this.pickDataForSaving()}},{key:"setEventListeners",value:function(){var e=this,t=new Date,i=S.closest("label").querySelector("datalist");C.min=t.toISOString().split("T")[0],C.addEventListener("focus",(function(e){return le(e)})),C.addEventListener("blur",(function(t){le(t),e.pickDataForSaving()})),C.addEventListener("change",(function(t){e.date=t.target.value,e.renderOverview()})),S.addEventListener("focus",(function(e){e.preventDefault(),le(e),i.style.display="block"})),i.addEventListener("mousedown",(function(t){"OPTION"===t.target.tagName&&(S.value=t.target.closest("option").value,e.time=t.target.value,e.renderOverview())})),S.addEventListener("blur",(function(t){le(t),e.pickDataForSaving(),i.style.display="none"})),L.addEventListener("blur",(function(t){e.name=t.target.value,e.pickDataForSaving()})),E.addEventListener("blur",(function(t){e.email=t.target.value,e.pickDataForSaving()})),w.addEventListener("blur",(function(t){e.phone=t.target.value,e.pickDataForSaving()})),R.addEventListener("click",(function(e){ue(Y),he(H)})),H.addEventListener("click",(function(t){var i=t.target.closest(".option").textContent;R.value=i.trim(),J.textContent=i,ue(Y),he(H),e.ticketType=R.value,e.calculateCost(),e.renderOverview()})),q.closest(".number-container").querySelectorAll("button").forEach((function(t){t.addEventListener("click",(function(t){e.basicNumber=q.value,e.calculateCost(),e.renderOverview()}))})),I.closest(".number-container").querySelectorAll("button").forEach((function(t){t.addEventListener("click",(function(t){e.seniorNumber=I.value,e.calculateCost(),e.renderOverview()}))})),this.button.addEventListener("click",(function(t){t.preventDefault();var i=document.createElement("span");i.classList.add("button__ripple-effect"),e.button.append(i);var r=e.button.getBoundingClientRect(),s=t.clientX-r.x,n=t.clientY-r.y;i.style.left="".concat(s,"px"),i.style.top="".concat(n,"px"),setTimeout((function(){i.remove()}),1e3)}))}}])&&me(t.prototype,i),s&&me(t,s),e}(),ve="This field is required",fe="You cannot choose a date in the past",pe="We are open from 9am till 6pm",ye="Allowed admission interval is 30 minutes",be="Type 3 to 15 characters",ge="Only Russian/English letters and spaces are allowed",_e="Pattern username@example.com is required",Ce="Max 10 digits possibly split by 2-3 digits with space or hiphen";function Se(e){return function(e){if(Array.isArray(e))return e}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return ke(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return ke(e,t)}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ke(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=e[i];return r}function Le(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Ee=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.formClass=t,this.form=this.formClass.form,this.isValidate=this.isValidate.bind(this),this.checkInputValidity=this.checkInputValidity.bind(this),this.handleInputs=this.handleInputs.bind(this),this.setSubmitButtonState=this.setSubmitButtonState.bind(this),this.setEventListeners=this.setEventListeners.bind(this),this.removeEventListeners=this.removeEventListeners.bind(this),this.resetErrors=this.resetErrors.bind(this)}var t,i,r;return t=e,(i=[{key:"isValidate",value:function(e){if(e.setCustomValidity(""),e.validity.valueMissing)return e.setCustomValidity(ve),!1;if(e.validity.tooShort||e.validity.tooLong)return e.setCustomValidity(be),!1;if(e.validity.patternMismatch&&"text"===e.type)return e.setCustomValidity(ge),!1;if("date"===e.type&&e.validity.rangeUnderflow)return e.setCustomValidity(fe),!1;if("time"===e.type){if(e.validity.rangeUnderflow||e.validity.rangeOverflow)return e.setCustomValidity(pe),!1;if(e.validity.stepMismatch)return e.setCustomValidity(ye),!1}return(e.validity.typeMismatch||e.validity.patternMismatch)&&"email"===e.type?(e.setCustomValidity(_e),!1):(e.validity.tooLong||e.validity.patternMismatch)&&"tel"===e.type?(e.setCustomValidity(Ce),!1):e.checkValidity()}},{key:"checkInputValidity",value:function(e){var t=e.parentNode.querySelector(".error-message"),i=this.isValidate(e);return i?(t.textContent="",e.classList.remove("error")):(t.textContent=e.validationMessage,e.classList.add("error")),i}},{key:"handleInputs",value:function(e){var t=this.formClass.button,i=Se(this.form.querySelectorAll("input")).slice(0);this.checkInputValidity(e.target),i.every(this.isValidate)?this.setSubmitButtonState(t,!0):this.setSubmitButtonState(t,!1)}},{key:"setEventListeners",value:function(){this.form.addEventListener("input",this.handleInputs,!0),this.form.addEventListener("change",this.handleInputs,!0),this.form.addEventListener("click",this.handleInputs,!0)}},{key:"removeEventListeners",value:function(){this.form.removeEventListener("input",this.handleInputs,!0),this.form.removeEventListener("change",this.handleInputs,!0),this.form.removeEventListener("click",this.handleInputs,!0),this.resetErrors()}},{key:"setSubmitButtonState",value:function(e,t){t?e.removeAttribute("disabled"):e.setAttribute("disabled","disabled")}},{key:"resetErrors",value:function(){this.form.querySelectorAll(".error-message").forEach((function(e){e.textContent="",e.parentNode.querySelector("input").classList.remove("error")}))}}])&&Le(t.prototype,i),r&&Le(t,r),e}();i(0);function we(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var qe=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.classes={basic:"carousel__image",active:"carousel__image_active",next:"carousel__image_next",toLeft:"carousel__image_to-left",toRight:"carousel__image_to-right",fromLeft:"carousel__image_from-left",fromRight:"carousel__image_from-right"},this.arrowLeft=c.querySelector(".carousel__arrow-left"),this.arrowRight=c.querySelector(".carousel__arrow-right"),this.isEnabled=!0,this.currentItem=0,this.btnOrderNum=1,this.images=o.querySelectorAll("img"),this.btns=l.querySelectorAll(".carousel__button"),this.setEventListeners=this.setEventListeners.bind(this)}var t,i,r;return t=e,(i=[{key:"changeCurrentItem",value:function(e){this.btns[this.currentItem].classList.remove("carousel__button_active"),this.currentItem=(e+this.images.length)%this.images.length}},{key:"hideItem",value:function(e){this.isEnabled=!1,this.images[this.currentItem].classList.add(e),this.images[this.currentItem].addEventListener("animationend",(function(t){t.target.classList.remove("carousel__image_active",e)}))}},{key:"showItem",value:function(e){var t=this;this.images[this.currentItem].classList.add(this.classes.next,e),this.images[this.currentItem].addEventListener("animationend",(function(i){i.target.classList.remove("carousel__image_next",e),i.target.classList.add("carousel__image_active"),t.btns[t.currentItem].classList.add("carousel__button_active"),document.querySelector(".carousel__img-order-num").textContent="0"+(t.currentItem+1),t.isEnabled=!0}))}},{key:"previousItem",value:function(e){this.hideItem(this.classes.toRight),this.changeCurrentItem(e-1),this.showItem(this.classes.fromLeft)}},{key:"nextItem",value:function(e){this.hideItem(this.classes.toLeft),this.changeCurrentItem(e+1),this.showItem(this.classes.fromRight)}},{key:"setEventListeners",value:function(){for(var e=this,t=function(t){e.btns[t].addEventListener("click",(function(){e.isEnabled&&(e.currentItem<t?e.nextItem(t-1):e.currentItem>t&&e.previousItem(t+1))}))},i=0;i<this.btns.length;i++)t(i);this.arrowLeft.addEventListener("click",(function(){e.isEnabled&&e.previousItem(e.currentItem)})),this.arrowRight.addEventListener("click",(function(){e.isEnabled&&e.nextItem(e.currentItem)}))}}])&&we(t.prototype,i),r&&we(t,r),e}();i(1);!function(){var e=new qe,t=new re,i=new ne,r=new ce(i),o=new de(i),c=new Ee(o);function l(){s.classList.toggle("mobile-menu_open"),n.classList.toggle("hamburger-button_open")}i.checkUser(),i.checkUser()&&r.loadInputs(),r.renderCost(),d.querySelectorAll("input").forEach((function(e){r.setEventListeners(e)})),document.addEventListener("scroll",(function e(){a.classList.add("go-up-link_visible"),document.removeEventListener("scroll",e)})),e.setEventListeners(),t.render(),n.addEventListener("click",l),s.addEventListener("click",l),r.button.addEventListener("click",(function(e){e.preventDefault(),o.open(),c.setEventListeners()})),o.setEventListeners(),o.closeBtn.addEventListener("click",(function(e){e.preventDefault(),o.close(),c.removeEventListeners()}))}()}]);